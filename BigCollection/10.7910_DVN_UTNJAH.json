{"status":"OK","data":{"id":60630,"identifier":"DVN/UTNJAH","persistentUrl":"https://doi.org/10.7910/DVN/UTNJAH","protocol":"doi","authority":"10.7910","publisher":"Harvard Dataverse","publicationDate":"2013-05-21","storageIdentifier":"s3://dvn-cloud:1902.1/21513","latestVersion":{"id":62150,"storageIdentifier":"s3://dvn-cloud:1902.1/21513","versionNumber":2,"versionMinorNumber":0,"versionState":"RELEASED","versionNote":"","distributionDate":"2013","productionDate":"Production Date","lastUpdateTime":"2013-05-31T05:44:12Z","releaseTime":"2013-05-31T00:00:00Z","createTime":"2013-05-24T04:23:16Z","license":"CC0","termsOfUse":"CC0 Waiver","metadataBlocks":{"citation":{"displayName":"Citation Metadata","fields":[{"typeName":"title","multiple":false,"typeClass":"primitive","value":"Consumer Expenditure Survey (CE)"},{"typeName":"author","multiple":true,"typeClass":"compound","value":[{"authorName":{"typeName":"authorName","multiple":false,"typeClass":"primitive","value":"Damico, Anthony"}}]},{"typeName":"datasetContact","multiple":true,"typeClass":"compound","value":[{"datasetContactEmail":{"typeName":"datasetContactEmail","multiple":false,"typeClass":"primitive","value":"ajdamico@gmail.com"}}]},{"typeName":"dsDescription","multiple":true,"typeClass":"compound","value":[{"dsDescriptionValue":{"typeName":"dsDescriptionValue","multiple":false,"typeClass":"primitive","value":"<h3 class=\"post-title entry-title\" itemprop=\"name\"> analyze the consumer expenditure survey (ce) with r </h3> the consumer expenditure survey (ce) is the primo data source to understand how americans spend money.  participating households keep a running diary about every little purchase over the year.  those diaries are then summed up into precise expenditure categories.  how else are you gonna know that the average american household spent $34 (<span class=\"st\">±</span>2) on bacon, $826 (<span\nclass=\"st\">±17) </span>on cellular phones, and $13 (<span class=\"st\">±2) </span>on digital e-readers in 2011?  an integral component of <a href=\"http://www.bls.gov/cpi/cpifaq.htm#Question_6\">the market basket calculation</a> in <a href=\"http://www.bls.gov/cpi/\">the consumer price index</a>, this survey recently became available as public-use microdata and they're <a href=\"http://www.bls.gov/cex/pumdhome.htm#online\">slowly releasing historical files back to 1996</a>.  hooray!<br /> <br /> for a t\naste of what's possible with ce data, look at <a href=\"http://www.bls.gov/cex/#tables\">the quick tables</a> listed on their main page - these tables contain approximately a bazillion different expenditure categories broken down by demographic groups.  guess what?  i just learned that americans living in households with $5,000 to $9,999 of annual income spent an average of $283 (<span class=\"st\">±90</span>) on pets, toys, hobbies, and playground equipment (<a href=\"http://www.bls.gov/cex/2011/Sta\nndard/income.pdf\">pdf page 3</a>).  you can often get close to your statistic of interest from these web tables.  but say you wanted to look at domestic pet expenditure among only households with children between 12 and 17 years old.  another one of the thirteen web tables - <a href=\"http://www.bls.gov/cex/2011/Standard/cucomp.pdf\">the consumer unit composition table</a> - shows a few different breakouts of households with kids, but none matching that exact population of interest.  the <a href=\"\nhttp://www.bls.gov/\">bureau of labor statistics (bls)</a> (the survey's designers) and the <a href=\"http://census.gov/\">census bureau</a> (the survey's administrators) have provided plenty of the major statistics and breakouts for you, but they're not psychic.  if you want to comb through this data for specific expenditure categories broken out by a you-defined segment of the united states' population, then let a little r into your life.  fun starts now.<br /> <br /> fair warning: only analyze t\nhe consumer expenditure survey if you are nerd to the core.  the microdata ship with two different survey types (interview and diary), each containing five or six quarterly table formats that need to be\n<a href=\"http://stat.ethz.ch/R-manual/R-patched/library/base/html/cbind.html\">stacked</a>, <a href=\"http://rss.acs.unt.edu/Rdoc/library/base/html/merge.html\">merged</a>, and manipulated prior to a methodologically-correct analysis.  the scripts in this repository contain examples to prepare 'em all, just be advised that magnificent data like this will never be no-assembly-required.  the folks at bls have posted <a href=\"http://www.bls.gov/cex/pumdhome.htm#about\">an excellent summary of what's av\nailable</a> - read it before anything else.  after that, read the <a href=\"http://www.bls.gov/cex/pumd_novice_guide.pdf\">getting started guide</a>.  don't skim.<br /> <br /> a few of the descriptions below refer to sas programs provided by the bureau of labor statistics.  you'll find these in the C:\\My Directory\\CES\\2011\\docs directory after you run the download program.  this new github repository contains three scripts:<br /> <br /> <b>2010-2011 - download all microdata.R</b><br /> <ul> <li>lo\nop through every year and download every file hosted on the bls's ce ftp site\n</li> <li>import each of the comma-separated value files into r with <a href=\"http://stat.ethz.ch/R-manual/R-patched/library/utils/html/read.table.html\">read.csv</a></li> <li>depending on user-settings, save each table as an<span class=\"Apple-converted-space\"> </span><a href=\"http://stat.ethz.ch/R-manual/R-patched/library/base/html/save.html\">r data file</a><span class=\"Apple-converted-space\"> </span>(.rda) or <a href=\"http://stat.ethz.ch/R-manual/R-devel/library/foreign/html/read.dta.html\">stat\na-readable file</a> (.dta) </li> </ul> <br /> <b>2011 fmly intrvw - analysis examples.R</b><b></b><br /> <ul> <li>load the <a href=\"http://stat.ethz.ch/R-manual/R-devel/library/base/html/load.html\">r data files</a> (.rda) necessary to create the 'fmly' table shown in the ce macros program documentation.doc file</li> <li>construct that 'fmly' table, using five quarters of interviews (q1 2011 thru q1 2012)</li> <li>initiate a <a href=\"http://faculty.washington.edu/tlumley/survey/html/svrepdesign.h\ntml\">replicate-weighted survey design</a> object<a href=\"ftp://ftp.cdc.gov/pub/health_statistics/nchs/dataset_documentation/nhis/2011/srvydesc.pdf\"></a></li> <li>perform some lovely li'l analysis examples</li> <li>replicate the <i>%mean_variance()</i> macro found in \"ce macros.sas\" and provide some examples of calculating descriptive statistics using <i>unimputed </i>variables</li> <li>replicate the <i>%compare_groups()</i> macro found in \"ce macros.sas\" and provide some examples of performing t\n-tests using <i>unimputed </i>variables</li> <li>create an <a href=\"http://cran.r-project.org/web/packages/RSQLite/RSQLite.pdf\">rsqlite database</a> (to minimize ram usage) containing the five imputed variable files, after identifying which variables were imputed based on <a href=\"http://www.bls.gov/cex/csxguide.pdf\">pdf page 3</a> of the user's guide to income imputation</li> <li>initiate a replicate-weighted, <a href=\"http://faculty.washington.edu/tlumley/survey/svy-dbi.html\">database-backed</\na>, <a href=\"http://faculty.washington.edu/tlumley/survey/svymi.html\">multiply-imputed</a> survey design object</li> <li>perform a few additional analyses that highlight <a href=\"http://rss.acs.unt.edu/Rdoc/library/mitools/html/MIcombine.html\">the modified syntax required</a> for multiply-imputed survey designs</li> <li>replicate the <i>%mean_variance()</i> macro found in \"ce macros.sas\" and provide some examples of calculating descriptive statistics  using <i>imputed </i>variables</li> <li>repl\nicate the <i>%compare_groups()</i> macro found in \"ce macros.sas\" and provide some examples of performing t-tests using <i>imputed </i>variables</li> <li>replicate the <i>%proc_reg()</i> and <i>%proc_logistic()</i> macros found in \"ce macros.sas\" and provide some examples of regressions and logistic regressions using both <i>unimputed</i> and <i>imputed </i>variables</li> </ul> <br /> <b>replicate integrated mean and se.R</b><br /> <ul> <li>match each step in the bls-provided sas program \"integr\nated mean and se.sas\" but with r instead of sas</li> <li>create an <a href=\"http://cran.r-project.org/web/packages/RSQLite/RSQLite.pdf\">rsqlite database</a> when the expenditure table gets too large for older computers to handle in ram </li> <li>export a table \"2011 integrated mean and se.csv\" that exactly matches the contents of the sas-produced \"2011 integrated mean and se.lst\" text file</li> </ul> <br /> <br /> <a href=\"https://github.com/ajdamico/usgsd/tree/master/Consumer%20Expenditure%20Su\nrvey\">click here to view these three scripts</a><br /> <br /> <br /> <br /> for more detail about the consumer expenditure survey (ce), visit:<br /> <ul> <li>the bureau of labor statistics' <a href=\"http://www.bls.gov/cex/\">consumer expenditure survey homepage</a></li> <li><a href=\"http://www.bls.gov/cex/csxsurveyforms.htm\">the survey questionnaire</a></li> <li>the national bureau of economic research's (old) <a href=\"http://www.nber.org/data/ces_cbo.html\">family-level ce extract page</a></li> <\n/ul> <br /> notes:<br /> <br /> throughout this post, i've used the terms consumer unit and household interchangeably.  <a href=\"http://www.bls.gov/cex/faq.htm#q3\">consumer unit</a> is a precise definition, but household is a reasonable proxy that will make more sense to your audience.  the consumer expenditure survey is a consumer unit-level survey, meaning all weights and results generalize to the average (non-institutional) american consumer unit.  since the unit of analysis is one consumer u\nnit rather than one person, it's trickier to talk about your results.  instead of saying, \"in 2011, the average american spent $x on y,\" you'll have to say, \"in 2011, the average american household spent $y on z.\"  if your boss frowns at you, blame it on me.\n<br /> <br /> if you're hard-pressed to talk about expenses at the individual-level, you could copy what the social security administration did on <a href=\"http://www.ssa.gov/policy/docs/chartbooks/expenditures_aged/exp_aged.pdf\">pdf page 11 of this report</a> and compute per capita expenditures, but i don't recommend it.  if you desperately need to open up that can of worms, run your analytic plan by <a href=\"http://www.bls.gov/cex/csxcont.htm\">the folks at bls</a> and get their blessing.  othe\nrwise, stick with household.  small price for wonderful data.<br /> <br /> confidential  to sas, spss, stata, and sudaan users: why are you still using medieval inventions?  you don't see airplane pilots navigating by the stars.  time to transition  to r.  :D"}}]},{"typeName":"producer","multiple":true,"typeClass":"compound","value":[{"producerName":{"typeName":"producerName","multiple":false,"typeClass":"primitive","value":"Anthony Damico"},"producerURL":{"typeName":"producerURL","multiple":false,"typeClass":"primitive","value":"http://www.asdfree.com/"}}]},{"typeName":"distributor","multiple":true,"typeClass":"compound","value":[{"distributorName":{"typeName":"distributorName","multiple":false,"typeClass":"primitive","value":"IQSS Dataverse Network"},"distributorURL":{"typeName":"distributorURL","multiple":false,"typeClass":"primitive","value":"http://dvn.iq.harvard.edu"},"distributorLogoURL":{"typeName":"distributorLogoURL","multiple":false,"typeClass":"primitive","value":"http://dvn.iq.harvard.edu/images/iqss-logo-background.png"}}]},{"typeName":"distributionDate","multiple":false,"typeClass":"primitive","value":"2013"},{"typeName":"dateOfDeposit","multiple":false,"typeClass":"primitive","value":"2013"}]}},"files":[]}}}